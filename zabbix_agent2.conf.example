# Zabbix Agent 2 Configuration Example for APT Updates Plugin
#
# This file demonstrates how to configure Zabbix Agent 2 to use the
# zabbix-apt-updates plugin.
#
# Copy this file to /etc/zabbix/zabbix_agent2.d/userparameter_apt.conf
# and restart the agent after making changes.

# Check for available APT updates (returns JSON with count and details)
UserParameter=apt.updates[check],/usr/local/bin/zabbix-apt-updates check

# Simple count of available updates
UserParameter=apt.updates[count],/usr/local/bin/zabbix-apt-updates check | grep -o '"available_updates": [0-9]*' | grep -o '[0-9]*'

# Check if above warning threshold
UserParameter=apt.updates[warning],/usr/local/bin/zabbix-apt-updates check | grep -o '"is_above_warning": true' | wc -l

# Example with environment variables for configuration
# UserParameter=apt.updates[check],ZBX_UPDATES_THRESHOLD_WARNING=5 ZBX_DEBUG=true /usr/local/bin/zabbix-apt-updates check
